
# Realmの事前調査共有

---

## Realm Cloudの概要

Realm Database + Realm Object Server = Realm Platform
Realm PlatformのRealm Object Serverをクラウド上に構築したのがRealm Cloud
リアルタイム同期やイベントハンドリングなどのサーバーサイド機能を持つ。

---

## Realm Cloudの料金体系

### Standard
- 月30$
- 2.5GBのストレージ
- 10000同時接続可能
- 3インスンタンス
  - 開発、ステージング、本番環境を想定

### Pro
- 月250$
- 5GBのストレージ
- 10000同時接続可能
- 3インスタンス

### Dedicated Cloud
- Realm運営「Contact us」


---

## Realm Cloudを使用する上での懸念点
- 同時接続の問題
- データの総入れ替えの問題

---

## 同時接続の問題について

当面10000以上の同時接続が起きることは想定しにくい。
10000接続というのはあらゆるデバイスからの接続10000を指す。
10000以上の接続数以上を求めると毎月250$以上になる。
10000以上の接続が起きた時にどうなるのか？ -> 他の質問と合わせて解答待ち


### 考えれる解決策
- Realm Cloudの料金プラン引き上げ
- Realm Cloudの接続数上限を超えないようにする
  - RealmとFirebaseを現在併用しているので、それを利用してフラグをFirabaseで持たせる。
    - フラグが有効な時に同期を行う。
- Realm Databaseのままで、外部にデータベースを持ち、そこにAPIリクエスト等でデータを更新する
  - 何らかの保存場所が必要になる。場合によってはサーバーサイドの工数も。

---

## Realmのデータ入れ替えの問題
Realm Cloudのデータを管理する画面で出来ることは限られている
- データの作成
- データの更新
- データの検索
- データの削除
- Realm Databaseの削除・作成、情報更新
- etc

この中に`データの全削除は含まれていない`
- 今までのように丸ごとデータベースの中身を入れ替えるには、Cloud上のRealmを削除して再度作成してその後新しいデータを追加
  - Cloud上のデータがなくなった瞬間各ローカルのRealm Databaseの内容を一気に作成しようとする仕様なのでそうならないよう実装が必要



